---

- name: db dependency
  include_tasks: rules/rule_verify_db_installation.yml

- name: db start
  include_tasks: templates/production/template_db_start.yml

- name: system install acl
  include_tasks: templates/system/template_install_acl.yml

- name: postgres set user postgres password
  include_tasks: templates/production/template_postgres_set_password.yml

- name: postgresql create database
  include_tasks: templates/production/template_postgres_create_db.yml

- name: postgres create user
  include_tasks: templates/production/template_postgres_create_user.yml

- name: postgres give privilege
  include_tasks: templates/production/template_postgres_privilege_user.yml

- name: postgres change owner of mastodon database
  include_tasks: templates/production/template_postgres_owner.yml